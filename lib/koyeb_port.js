const _0x5c79ba=_0x577d;(function(_0x3e299d,_0x4bb081){const _0x2d8e8b=_0x577d,_0x43376d=_0x3e299d();while(!![]){try{const _0x1b2ab3=-parseInt(_0x2d8e8b(0x193))/0x1*(-parseInt(_0x2d8e8b(0x17e))/0x2)+parseInt(_0x2d8e8b(0x180))/0x3+parseInt(_0x2d8e8b(0x165))/0x4*(-parseInt(_0x2d8e8b(0x183))/0x5)+-parseInt(_0x2d8e8b(0x18b))/0x6*(-parseInt(_0x2d8e8b(0x18a))/0x7)+parseInt(_0x2d8e8b(0x16e))/0x8*(parseInt(_0x2d8e8b(0x191))/0x9)+parseInt(_0x2d8e8b(0x171))/0xa*(parseInt(_0x2d8e8b(0x196))/0xb)+parseInt(_0x2d8e8b(0x167))/0xc*(-parseInt(_0x2d8e8b(0x188))/0xd);if(_0x1b2ab3===_0x4bb081)break;else _0x43376d['push'](_0x43376d['shift']());}catch(_0x159a00){_0x43376d['push'](_0x43376d['shift']());}}}(_0x1c77,0xa6ab0));const axios=require(_0x5c79ba(0x182));let koyeb_api=process[_0x5c79ba(0x17d)]['KOYEB_API'],axiosConfig={'headers':{'Content-Type':_0x5c79ba(0x17c),'Authorization':_0x5c79ba(0x185)+koyeb_api}};async function get_deployments(){const _0x346c3e=_0x5c79ba;status=![];let _0x2efe6f={'headers':{'Content-Type':'application/json;charset=UTF-8','Authorization':_0x346c3e(0x185)+koyeb_api}};return await axios[_0x346c3e(0x16b)]('https://app.koyeb.com/v1/deployments',_0x2efe6f)[_0x346c3e(0x194)](_0x26f1f0=>{const _0x281267=_0x346c3e;let _0x1425a7=[_0x281267(0x16c),_0x281267(0x17a),_0x281267(0x17f),'ERRPRING'],_0x2b4eb5=[];for(let _0xd7138f=0x0;_0xd7138f<_0x26f1f0[_0x281267(0x195)]['deployments']['length'];_0xd7138f++){!_0x1425a7['includes'](_0x26f1f0[_0x281267(0x195)][_0x281267(0x190)][_0xd7138f][_0x281267(0x16f)])&&_0x2b4eb5[_0x281267(0x17b)](_0x26f1f0[_0x281267(0x195)]['deployments'][_0xd7138f][_0x281267(0x16f)]);}if(_0x2b4eb5['length']>0x1)status='true';}),status;}function checkArray(_0x2c28a6,_0x525af9){const _0x4499ab=_0x5c79ba;var _0x49469d=![];for(var _0x124960=0x0;_0x124960<_0x2c28a6[_0x4499ab(0x162)];_0x124960++){if(_0x2c28a6[_0x124960][_0x4499ab(0x199)]==_0x525af9){_0x49469d=!![];break;}}return _0x49469d;}async function delvar(_0xf3ca70){const _0x161ae2=_0x5c79ba;var _0x3ac345=![];let {data:_0x3b502d}=await axios[_0x161ae2(0x16b)](_0x161ae2(0x18d),axiosConfig),_0x22a2c1=_0x3b502d[_0x161ae2(0x179)][0x0]['id'],_0x33f037=await axios[_0x161ae2(0x16b)](_0x161ae2(0x173)+_0x3b502d[_0x161ae2(0x179)][0x0][_0x161ae2(0x16a)],axiosConfig),_0x4ec1ce=checkArray(_0x33f037[_0x161ae2(0x195)][_0x161ae2(0x174)][_0x161ae2(0x164)]['env'],_0xf3ca70);if(_0x4ec1ce!==!![])return _0x161ae2(0x181);let _0x1fb439=[];for(var _0x25a486=0x0;_0x25a486<_0x33f037[_0x161ae2(0x195)][_0x161ae2(0x174)][_0x161ae2(0x164)]['env']['length'];_0x25a486++){if(_0x33f037[_0x161ae2(0x195)][_0x161ae2(0x174)][_0x161ae2(0x164)][_0x161ae2(0x17d)][_0x25a486][_0x161ae2(0x199)]===_0xf3ca70)continue;_0x1fb439[_0x161ae2(0x17b)](_0x33f037[_0x161ae2(0x195)][_0x161ae2(0x174)][_0x161ae2(0x164)]['env'][_0x25a486]);}let _0x90807d={'definition':{'name':_0x33f037['data']['deployment'][_0x161ae2(0x164)]['name'],'routes':_0x33f037[_0x161ae2(0x195)][_0x161ae2(0x174)][_0x161ae2(0x164)]['routes'],'ports':_0x33f037[_0x161ae2(0x195)][_0x161ae2(0x174)][_0x161ae2(0x164)][_0x161ae2(0x197)],'env':_0x1fb439,'regions':_0x33f037[_0x161ae2(0x195)]['deployment'][_0x161ae2(0x164)]['regions'],'scalings':_0x33f037[_0x161ae2(0x195)][_0x161ae2(0x174)]['definition'][_0x161ae2(0x18f)],'instance_types':_0x33f037[_0x161ae2(0x195)][_0x161ae2(0x174)]['definition'][_0x161ae2(0x18e)],'health_checks':_0x33f037[_0x161ae2(0x195)]['deployment'][_0x161ae2(0x164)]['health_checks'],'docker':_0x33f037[_0x161ae2(0x195)]['deployment'][_0x161ae2(0x164)][_0x161ae2(0x161)]}};return await axios[_0x161ae2(0x187)](_0x161ae2(0x175)+_0x22a2c1,_0x90807d,axiosConfig)[_0x161ae2(0x194)](_0x5e9186=>{const _0x13b756=_0x161ae2;_0x5e9186[_0x13b756(0x16f)]===0xc8?_0x3ac345='_Successfully\x20deleted\x20'+_0xf3ca70+_0x13b756(0x198):_0x3ac345=_0x13b756(0x18c);}),_0x3ac345;}async function change_env(_0x4cc83b){const _0x5a9567=_0x5c79ba;var _0x36560d='_Please\x20put\x20Koyeb\x20api\x20key\x20in\x20var\x20KOYEB_API._\x0aEg:\x20KOYEB_API:api\x20key';let {data:_0x1c9696}=await axios[_0x5a9567(0x16b)](_0x5a9567(0x18d),axiosConfig),_0x35a763=_0x1c9696[_0x5a9567(0x179)][0x0]['id'],_0x18ce90=await axios[_0x5a9567(0x16b)](_0x5a9567(0x173)+_0x1c9696['services'][0x0][_0x5a9567(0x16a)],axiosConfig),_0x5ac213=_0x4cc83b[_0x5a9567(0x172)](':'),_0x109ad2=[];for(var _0x519cf9=0x0;_0x519cf9<_0x18ce90[_0x5a9567(0x195)][_0x5a9567(0x174)][_0x5a9567(0x164)]['env'][_0x5a9567(0x162)];_0x519cf9++){_0x18ce90['data']['deployment'][_0x5a9567(0x164)][_0x5a9567(0x17d)][_0x519cf9][_0x5a9567(0x199)]===_0x5ac213[0x0]?_0x109ad2['push']({'scopes':[_0x5a9567(0x166)],'key':''+_0x5ac213[0x0],'value':''+_0x5ac213[0x1]}):_0x109ad2[_0x5a9567(0x17b)](_0x18ce90[_0x5a9567(0x195)][_0x5a9567(0x174)][_0x5a9567(0x164)][_0x5a9567(0x17d)][_0x519cf9]);}let _0x5bdae5=checkArray(_0x109ad2,_0x5ac213[0x0]);!_0x5bdae5===!![]&&_0x109ad2[_0x5a9567(0x17b)]({'scopes':['region:fra'],'key':''+_0x5ac213[0x0],'value':''+_0x5ac213[0x1]});let _0x552565={'definition':{'name':_0x18ce90[_0x5a9567(0x195)][_0x5a9567(0x174)]['definition'][_0x5a9567(0x170)],'routes':_0x18ce90[_0x5a9567(0x195)][_0x5a9567(0x174)][_0x5a9567(0x164)][_0x5a9567(0x176)],'ports':_0x18ce90[_0x5a9567(0x195)][_0x5a9567(0x174)]['definition'][_0x5a9567(0x197)],'env':_0x109ad2,'regions':_0x18ce90[_0x5a9567(0x195)][_0x5a9567(0x174)]['definition'][_0x5a9567(0x186)],'scalings':_0x18ce90['data'][_0x5a9567(0x174)][_0x5a9567(0x164)][_0x5a9567(0x18f)],'instance_types':_0x18ce90[_0x5a9567(0x195)]['deployment'][_0x5a9567(0x164)][_0x5a9567(0x18e)],'health_checks':_0x18ce90[_0x5a9567(0x195)][_0x5a9567(0x174)]['definition'][_0x5a9567(0x177)],'docker':_0x18ce90[_0x5a9567(0x195)][_0x5a9567(0x174)][_0x5a9567(0x164)][_0x5a9567(0x161)]}};return await axios[_0x5a9567(0x187)](_0x5a9567(0x175)+_0x35a763,_0x552565,axiosConfig)['then'](_0x197694=>{const _0x264150=_0x5a9567;_0x197694[_0x264150(0x16f)]===0xc8?_0x36560d=_0x264150(0x178)+_0x5ac213[0x0]+':'+_0x5ac213[0x1]+_0x264150(0x184):_0x36560d=_0x264150(0x18c);}),_0x36560d;}async function getallvar(){const _0x2e6683=_0x5c79ba;let {data:_0x589e43}=await axios[_0x2e6683(0x16b)]('https://app.koyeb.com/v1/services',axiosConfig),_0x385146=await axios[_0x2e6683(0x16b)](_0x2e6683(0x173)+_0x589e43['services'][0x0][_0x2e6683(0x16a)],axiosConfig),_0x1a17cb=[];for(var _0x471b28=0x0;_0x471b28<_0x385146[_0x2e6683(0x195)][_0x2e6683(0x174)][_0x2e6683(0x164)][_0x2e6683(0x17d)][_0x2e6683(0x162)];_0x471b28++){if(!_0x385146[_0x2e6683(0x195)][_0x2e6683(0x174)][_0x2e6683(0x164)][_0x2e6683(0x17d)][_0x471b28][_0x2e6683(0x199)])continue;_0x1a17cb[_0x2e6683(0x17b)]('*'+_0x385146[_0x2e6683(0x195)][_0x2e6683(0x174)][_0x2e6683(0x164)][_0x2e6683(0x17d)][_0x471b28][_0x2e6683(0x199)]+_0x2e6683(0x160)+_0x385146[_0x2e6683(0x195)][_0x2e6683(0x174)][_0x2e6683(0x164)]['env'][_0x471b28][_0x2e6683(0x189)]+'_');}return _0x1a17cb[_0x2e6683(0x163)]('\x0a');}async function getvar(_0x63c20d){const _0x591ebf=_0x5c79ba;let {data:_0x246a93}=await axios[_0x591ebf(0x16b)](_0x591ebf(0x18d),axiosConfig),_0x3add29=await axios[_0x591ebf(0x16b)]('https://app.koyeb.com/v1/deployments/'+_0x246a93[_0x591ebf(0x179)][0x0][_0x591ebf(0x16a)],axiosConfig);for(var _0x1aa93c=0x0;_0x1aa93c<_0x3add29['data'][_0x591ebf(0x174)][_0x591ebf(0x164)][_0x591ebf(0x17d)][_0x591ebf(0x162)];_0x1aa93c++){if(!_0x3add29[_0x591ebf(0x195)]['deployment'][_0x591ebf(0x164)][_0x591ebf(0x17d)][_0x1aa93c][_0x591ebf(0x199)])continue;if(_0x3add29[_0x591ebf(0x195)][_0x591ebf(0x174)][_0x591ebf(0x164)]['env'][_0x1aa93c][_0x591ebf(0x199)]===_0x63c20d)return _0x3add29[_0x591ebf(0x195)][_0x591ebf(0x174)][_0x591ebf(0x164)][_0x591ebf(0x17d)][_0x1aa93c][_0x591ebf(0x199)]+':'+_0x3add29['data'][_0x591ebf(0x174)]['definition']['env'][_0x1aa93c][_0x591ebf(0x189)];}}function _0x577d(_0x3c8232,_0xac4417){const _0x1c77c8=_0x1c77();return _0x577d=function(_0x577dd3,_0x23b38b){_0x577dd3=_0x577dd3-0x160;let _0x4e3f1c=_0x1c77c8[_0x577dd3];return _0x4e3f1c;},_0x577d(_0x3c8232,_0xac4417);}function _0x1c77(){const _0x95f420=['data','2831972dCLlFR','ports','\x20var\x20from\x20koyeb._','key','*\x20:\x20_','docker','length','join','definition','6964dgYiZd','region:fra','36DaKchZ','/redeploy','*Got\x20an\x20error\x20in\x20redeploying.*\x0a*Please\x20put\x20koyeb\x20api\x20key\x20in\x20var\x20KOYEB_API.*\x0a_Eg:\x20KOYEB_API:api\x20key\x20from\x20https://app.koyeb.com/account/api\x20._','latest_deployment_id','get','STOPPED','_update\x20started._','962672TxboMP','status','name','10kcXXcl','split','https://app.koyeb.com/v1/deployments/','deployment','https://app.koyeb.com/v1/services/','routes','health_checks','Successfuly\x20changed\x20var\x20_','services','STOPPING','push','application/json;charset=UTF-8','env','566YjCxXl','ERROR','4063212NEafOa','_No\x20such\x20env\x20in\x20koyeb._','axios','1625mCxIOj','\x20._','Bearer\x20','regions','patch','14303302KbHJIB','value','651njzBtb','16272JDNwaX','_Please\x20put\x20Koyeb\x20api\x20key\x20in\x20var\x20KOYEB_API._\x0aEg:\x20KOYEB_API:api\x20key','https://app.koyeb.com/v1/services','instance_types','scalings','deployments','99YEJtMD','post','4811xEvuFc','then'];_0x1c77=function(){return _0x95f420;};return _0x1c77();}async function redeploy(){const _0xce7e0a=_0x5c79ba;var _0x939dc1=![],_0x3059c6={'deployment_group':'prod','sha':''};let {data:_0x3b045b}=await axios[_0xce7e0a(0x16b)](_0xce7e0a(0x18d),axiosConfig),_0x568389=_0x3b045b[_0xce7e0a(0x179)][0x0]['id'];try{let _0x1b0410=await axios[_0xce7e0a(0x192)](_0xce7e0a(0x175)+_0x568389+_0xce7e0a(0x168),_0x3059c6,axiosConfig);_0x939dc1=_0xce7e0a(0x16d);}catch(_0x5ee705){_0x939dc1=_0xce7e0a(0x169);}return _0x939dc1;}module['exports']={'redeploy':redeploy,'getvar':getvar,'delvar':delvar,'getallvar':getallvar,'change_env':change_env,'get_deployments':get_deployments};
